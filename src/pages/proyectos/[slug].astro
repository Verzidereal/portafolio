---
import Base from "../../layouts/Base.astro";
import type { Project } from "../../data/projects";
import { projects } from "../../data/projects";

/** Genera una página estática por cada slug */
export function getStaticPaths() {
  return projects
    .filter((p) => !!p.slug)
    .map((p) => ({
      params: { slug: p.slug as string },
      props: { project: p },
    }));
}

// (opcional) fuerza SSG si usas un adaptador server
// export const prerender = true;

const { project: p } = Astro.props as { project: Project };
---

<Base title={`${p.title} — Proyecto`} description={p.description}>
  <main class="mx-auto max-w-4xl px-4 sm:px-6 lg:px-8 py-10">
    <a href="/#proyectos" class="text-accent">← Volver</a>

    <h1 class="mt-3 text-3xl sm:text-4xl font-bold">{p.title}</h1>
    <p class="mt-2 text-zinc-300">{p.description}</p>

    {p.cover && (
      <img src={p.cover} alt={p.title} class="mt-6 rounded-2xl border border-white/10" loading="lazy" />
    )}

    <div class="mt-6 flex flex-wrap gap-2">
      {p.stack?.map((s) => <span class="chip">{s}</span>)}
      {p.hosting && <span class="chip">Hosting: {p.hosting}</span>}
      {typeof p.year === "number" && <span class="chip">{p.year}</span>}
    </div>

    <div class="mt-6 flex gap-3">
      {p.link && <a class="btn" href={p.link} target="_blank" rel="noopener noreferrer">Ver sitio</a>}
      {p.repo && <a class="btn-outline" href={p.repo} target="_blank" rel="noopener noreferrer">Código</a>}
    </div>
  </main>
</Base>
